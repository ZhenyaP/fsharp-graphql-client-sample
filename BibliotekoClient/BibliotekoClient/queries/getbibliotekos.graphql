query getBibliotekos {
  bibliotekos {
    id
    content {
        ...borrowedFields
        ...ownedFields
        ...lentFields
    }
    address {
        freeformaddress
        country
        countrycode
        street
        buildingnumber
        postalcode
    }
  }
}

fragment borrowedFields on Borrowed {
    id
    registri {
        ...registriFields
    }
    logbook
    owner
}

fragment ownedFields on Owned {
    id
    registri {
        ...registriFields
    }
    logbook
    owner
}

fragment lentFields on Lent {
    id
    registri {
        ...registriFields
    }
    logbook
    owner
}

fragment registriFields on Registri {
    id
    isbn
    title
    authors
    reviews {
        id
        reviewer
        content {
            __typename
            ... on Reaction {
                type
            }
            ... on Comment {
                type
            }
            ... on ReactionAndComment {
                reaction {
                    type
                }
                comment {
                    type
                }
            }
        }
    }
    summary
    imageurl
}