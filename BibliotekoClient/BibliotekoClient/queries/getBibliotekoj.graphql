query getBibliotekoj {
  bibliotekoj {
    id
    content {
        ...borrowedFields
        ...ownedFields
        ...lentFields
    }
    address {
        freeformaddress
        country
        countrycode
        street
        buildingnumber
        postalcode
    }
  }
}

fragment borrowedFields on Borrowed {
    id
    registri {
        ...registriFields
    }
    logbook
    owner
}

fragment ownedFields on Owned {
    id
    registri {
        ...registriFields
    }
    logbook
    owner
}

fragment lentFields on Lent {
    id
    registri {
        ...registriFields
    }
    logbook
    owner
}

fragment registriFields on Registri {
    id
    isbn
    title
    authors
    recenzoj {
        id
        recenzorer
        content {
            ... on Reaction {
                reaction
            }
            ... on CommentOnly {
                comment
            }
            ... on ReactionAndComment {
                reaction
                comment
            }
        }
    }
    summary
    imageurl
}